<link rel="stylesheet" href="../styles/main.css" type="text/css">
<script>
(function(){
  var parentHtml = window.parent.document.documentElement;
  var myHtml = document.documentElement;

  function syncTheme(){
    // Get parent classes and perform replacement
    var classes = parentHtml.className.replace(
      /\bNDFramePage\b/g, 
      'NDContentPage'
    );
    
    // Apply modified class list
    myHtml.className = classes;
  }

  syncTheme();

  new MutationObserver(syncTheme)
    .observe(parentHtml, { attributes: true, attributeFilter: ['class'] });
})();
</script>
<h1 class="CTitle" id="hub-float-simulation-library">HUB-Float
Simulation Library</h1>
<p>A C++ implementation of the Half-Unit-Biased (HUB) floating-point
number representation format.</p>
<h2 class="CHeading" id="overview">Overview</h2>
<p>HUB (Half-Unit-Biased) is an emerging number representation format
that shifts the representation line of binary numbers by half unit in
the last place (ULP). The key feature of HUB format is that rounding to
nearest is achieved simply by truncation, which eliminates the need for
complex rounding logic and prevents carry propagation during rounding
operations.</p>
<p>This library provides a C++ implementation of the HUB format with
configurable exponent and mantissa bit widths, defaulting to IEEE-754
single precision parameters (8-bit exponent, 23-bit mantissa).</p>
<h2 class="CHeading" id="features">Features</h2>
<ul>
<li><strong>Configurable Precision</strong></li>
<li><strong>Standard Arithmetic Operations</strong></li>
<li><strong>FMA Emulation</strong></li>
<li><strong>Special Value Handling</strong></li>
<li><strong>Conversion Support</strong></li>
<li><strong>Diagnostic Functions</strong></li>
</ul>
<h2 class="CHeading" id="usage">Usage</h2>
<h3 class="CHeading" id="basic-operations">Basic Operations</h3>
<div class="CTopic">
<div class="sourceCode" id="cb1"><pre
class="sourceCode cpp CCode"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;hub_float.hpp&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create HUB float values</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    hub_float a <span class="op">=</span> <span class="fl">3.14</span><span class="dv">_hb</span><span class="op">;</span>        <span class="co">// Using literal</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    hub_float b<span class="op">(</span><span class="fl">2.71</span><span class="op">);</span>            <span class="co">// From double</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    hub_float c <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span>          <span class="co">// Addition</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Arithmetic operations</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    hub_float result <span class="op">=</span> a <span class="op">*</span> b <span class="op">+</span> c<span class="op">;</span> <span class="co">// Multiplication and addition</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Display binary representation</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Binary: &quot;</span> <span class="op">&lt;&lt;</span> result<span class="op">.</span>toBinaryString<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Hex: &quot;</span> <span class="op">&lt;&lt;</span> result<span class="op">.</span>toHexString<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<h2 class="CHeading" id="key-characteristics">Key Characteristics</h2>
<ul>
<li><strong>Implicit Least Significant Bit (ILSB)</strong>: In HUB
format, the least significant bit is always 1 and is implicit</li>
<li><strong>Simplified Rounding</strong>: Rounding to nearest is
achieved by simple truncation</li>
<li><strong>Hardware Efficiency</strong>: Eliminates carry propagation
during rounding operations</li>
<li><strong>Same Storage Requirements</strong>: Requires the same
storage space as conventional formats with equivalent precision</li>
</ul>
<h2 class="CHeading" id="implementation-details">Implementation
Details</h2>
<p>The implementation uses a double as the internal storage format, with
bit manipulation to ensure values conform to the HUB grid. Key
implementation aspects include:</p>
<ul>
<li>Quantization to the HUB grid via bit manipulation</li>
<li>Special case handling for values like infinity, NaN, and
subnormals</li>
<li>Proper extraction of bit fields for string representations</li>
<li>Support for all basic arithmetic operations</li>
<li>Detection and correction of double rounding in float32 FMA emulation
(EXP_BITS=8, MANT_BITS=23) for accurate single-precision results</li>
</ul>
<h2 class="CHeading" id="references">References</h2>
<p>For more information about the HUB format, refer to:</p>
<ul>
<li>J. Hormigo and J. Villalba, “New formats for computing with
real-numbers under round-to-nearest,” in IEEE Transactions on
Computers</li>
<li>J. Hormigo and J. Villalba, “Measuring Improvement When Using HUB
Formats to Implement Floating-Point Systems under Round-to-Nearest,” in
IEEE Transactions on Very Large Scale Integration (VLSI) Systems</li>
</ul>
<p><img
src="https://github.com/HUBformat/.github/raw/main/profile/res/MICIU+NextG+PRTR+AEI.svg"
alt="Logos of the Spanish Government, European Union NextGenerationEU, Spanish Recovery and Resilience Plans, and Spanish State Research Agency." /> </p>
